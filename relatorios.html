<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Relatórios</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
     <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
     <style>
       /* Botões em verde claro */
       .btn-primary {
         background-color: #006400;
         border-color: #005a00;
         color: #fff;
       }
       .btn-primary:hover {
         background-color: #0a7f0a;
         border-color: #096f09;
       }
       .btn-primary:active, .btn-primary.active, .btn-primary:focus {
         background-color: #075c00;
         border-color: #064f00;
       }
       .btn-primary:focus { box-shadow: 0 0 0 0.25rem rgba(0, 100, 0, 0.45); }
       /* Plano de fundo com imagem */
       body.relatorios-bg {
         background-image: url('/images/bg-final.jpg');
         background-size: cover;
         background-position: center;
         background-repeat: no-repeat;
       }
        /* Links em verde escuro */
        a { color: #006400; font-size: 1.15rem; }
          a:hover { color: #000 !important; }
          strong { font-size: 1.15rem; }
          strong:hover { color: #000 !important; }
         /* Navbar em verde escuro */
         .navbar.bg-primary { background-color: #006400 !important; }
       </style>
     </head>
    <body class="relatorios-bg min-vh-100">
    <nav class="navbar navbar-dark bg-primary">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Relatórios</span>
        <button id="logoutBtn" class="btn btn-outline-light">Sair</button>
      </div>
    </nav>
    <div class="container">
      <!-- Navegação superior entre páginas -->
      <div class="d-flex align-items-center gap-2 mb-3">
        <a href="./usuarios.html" class="text-decoration-none">Gerenciamento de Usuários</a>
        <span class="text-muted">|</span>
        <a href="./tipos.html" class="text-decoration-none">Gerenciamento de Tipos</a>
        <span class="text-muted">|</span>
        <a href="./contatos.html" class="text-decoration-none">Gerenciamento de Contatos</a>
        <span class="text-muted">|</span>
        <strong>Relatórios</strong>
      </div>

      <!-- Título e período -->
      <div class="card mb-3">
        <div class="card-body">
          <h3 id="relatorioTitulo" class="card-title mb-2">Relatório</h3>
          <p id="relatorioPeriodo" class="card-text text-muted">Período</p>
        </div>
      </div>

      <!-- Totais consolidados -->
      <div class="row g-3 mb-3" id="totaisConsolidados">
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Contatos</h5>
              <p class="card-text mb-1">Total atual: <span id="contatosTotalAtual" class="fw-semibold">-</span></p>
              <p class="card-text">Variação vs período anterior: <span id="contatosVariacao" class="fw-semibold">-</span></p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Tipos</h5>
              <p class="card-text mb-1">Total atual: <span id="tiposTotalAtual" class="fw-semibold">-</span></p>
              <p class="card-text">Variação vs período anterior: <span id="tiposVariacao" class="fw-semibold">-</span></p>
            </div>
          </div>
        </div>
      </div>

      <!-- Gráficos -->
      <div class="row g-3 mb-3">
        <div class="col-lg-6">
          <div class="card h-100">
            <div class="card-header">Evolução mensal de contatos</div>
            <div class="card-body">
              <canvas id="contactsLineChart" height="140"></canvas>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="card h-100">
            <div class="card-header">Distribuição por status (contatos)</div>
            <div class="card-body">
              <canvas id="contactsStatusDonut" height="140"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div class="row g-3 mb-3">
        <div class="col-lg-6">
          <div class="card h-100">
            <div class="card-header">Comparação entre tipos e status</div>
            <div class="card-body">
              <canvas id="typesStackedChart" height="140"></canvas>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="card h-100">
            <div class="card-header">Ranking de crescimento por tipo</div>
            <div class="card-body">
              <canvas id="typeGrowthChart" height="140"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Situação dos tipos (opcional gráfico rápido) -->
      <div class="row g-3 mb-4">
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header">Situação dos tipos (ativos x inativos)</div>
            <div class="card-body">
              <canvas id="typesStatusDonut" height="120"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/js/relatorios.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>